# o1scraper
o1scraperは、ChatGPTの会話から折りたたまれたテキストデータを自動的に抽出し、JSON形式で保存するPythonベースのツールです。Playwrightを使用したウェブ自動化機能を備えており、環境セットアップを自動化することで使いやすさを向上させています。

## 特徴
- ChatGPT会話からの折りたたまれたテキスト要素の抽出
- タイムスタンプベースのファイル名でのJSON出力
- 抽出データのクリーンアップ機能

## 前提条件
- Windows 10
- Python 3.7以上
- モダンなウェブブラウザ（例：Microsoft Edge、Google Chrome）
- ブラウザをリモートデバッグモードで起動する必要があります

## セットアップ
1. **リポジトリのクローンまたはダウンロード**
   
   このリポジトリをローカルマシンにクローンするか、ZIPファイルとしてダウンロードして解凍してください。

2. **仮想環境の作成とアクティベート**
   
   仮想環境を作成してアクティベートしてください：
   ```bash
   python -m venv o1scraper
   .\o1scraper\Scripts\activate  # Windowsの場合
   ```

3. **依存関係のインストール**
   
   仮想環境をアクティベートした状態で、以下のコマンドを実行して依存関係をインストールします：
   ```bash
   pip install -r requirements.txt
   ```

## 使用方法
1. **ブラウザのリモートデバッグモードでの起動**
   
   リモートデバッグを有効にしてブラウザを起動します。以下はMicrosoft Edgeを使用する例です。必要に応じてブラウザのパスやオプションを調整してください。
   - **Microsoft Edgeの場合**:
     
     ショートカットを作成し、ターゲットフィールドに以下を追加します：
     ```
     "C:\Program Files (x86)\Microsoft\Edge\Application\msedge.exe" --remote-debugging-port=9222 --user-data-dir="C:\edge_debug"
     ```
     
     **注**: このコマンドは例です。ブラウザの実行ファイルのパスやオプションは環境に応じて変更してください。重要なのは`--remote-debugging-port=9222`フラグです。

2. **ChatGPT会話ページの準備**
   
   ブラウザでChatGPTを開き、データを抽出したい会話ページに移動します。

3. **スクリプトの実行**
   
   コマンドプロンプトを開き、プロジェクトディレクトリに移動してスクリプトを実行します：
   ```bash
   cd path\to\o1scraper
   python toggleopen.py
   ```
   トグルをすべて開いた後、以下のコマンドを実行してテキストを抽出します：
   ```bash
   python text_extraction.py
   ```
   最後に、抽出されたJSONファイルをクリーンアップするには以下のコマンドを実行します：
   ```bash
   python json_cleaner.py
   ```

## 出力
- 抽出されたデータは、`extracted_data/`ディレクトリ内にタイムスタンプベースのファイル名（例：`extracted_data_1726404502.json`）で保存されます。
- クリーンアップされたデータは、`extracted_data/cleaned/`ディレクトリに保存されます。

## トラブルシューティング
- **スクリプトがChatGPTページを見つけられない場合**:
  - ブラウザがリモートデバッグモードで起動されていることを確認してください。
  - ChatGPTの会話ページが正しく開かれているか確認してください。
- **依存関係に関連する問題**:
  - 仮想環境をアクティベートした後に、手動で以下をインストールしてみてください：
  ```bash
  pip install playwright
  playwright install chromium
  ```

## 貢献
貢献は大歓迎です！プルリクエストを送信してください。

## ライセンス
このプロジェクトはMITライセンスの下でライセンスされています。詳細については、[LICENSE](LICENSE)ファイルを参照してください。

## 免責事項
このツールは教育目的のみで使用してください。スクリプトを使用する際は、OpenAIの利用規約および適用される法律や規制を遵守してください。